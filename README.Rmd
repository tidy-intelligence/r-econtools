---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# econtools

<!-- badges: start -->
[![CRAN status](https://www.r-pkg.org/badges/version/econtools)](https://cran.r-project.org/package=econtools)
[![CRAN downloads](https://cranlogs.r-pkg.org/badges/econtools)](https://cran.r-project.org/package=econtools)
![R CMD Check](https://github.com/tidy-intelligence/econtools/actions/workflows/R-CMD-check.yaml/badge.svg)
![Lint](https://github.com/tidy-intelligence/econtools/actions/workflows/lint.yaml/badge.svg)
[![Codecov test coverage](https://codecov.io/gh/tidy-intelligence/econtools/graph/badge.svg)](https://app.codecov.io/gh/tidy-intelligence/econtools)
<!-- badges: end -->

Provides a consistent set of functions for enriching and analyzing sovereign-level economic data. Economists, data scientists, and financial  professionals can use the package to add standardized identifiers, demographic and macroeconomic indicators, and derived metrics such as  gross domestic product per capita or government expenditure shares.

The package is part of the [EconDataverse](https://www.econdataverse.org/) family of packages aimed at helping economists and financial professionals work with sovereign-level economic data.

## Installation

You can install `econtools` from [CRAN](https://cran.r-project.org/package=econtools) via:

``` r
install.packages("econtools")
```

You can install the development version of `econtools` from [GitHub](https://github.com/) with:

``` r
# install.packages("pak")
pak::pak("tidy-intelligence/econtools")
```

## Usage

This is a basic example which shows you how to solve a common problem:

```{r example}
library(econtools)
```

```{r}
df <- data.frame(
  id = rep("USA", 5),
  name = c("United States", "United.states", "US", "USA", "United States"),
  year = 2019:2023,
  gross_domestic_product = c(2.15e13, 2.14e13, 2.37e13, 2.60e13, 2.77e13)
)

add_population_column(df, id_column = "name", id_type = "regex")
```

The simplest way to add additional information is using an ISO 3166-1 alpha-3 code.

Add most recent population number:
```{r}
add_population_column(df, id_column = "id")
```

Add population by year:

```{r}
add_population_column(df, id_column = "id", date_column = "year")
```

Similarly, for poverty ratio:
```{r}
add_poverty_ratio_column(df, id_column = "id", date_column = "year")
```

Create a new column that calculates a value relative to the population, for instance GDP per capita:
```{r}
add_population_share_column(
  df,
  id_column = "id",
  date_column = "year",
  value_column = "gross_domestic_product"
)
```

Add income levels via:

```{r}
add_income_level_column(df, id_column = "id")
```

If you want to use another column and automatically map identifiers to a new `entity_id` column using the `econid` package:

```{r}
add_population_column(df, id_column = "name", id_type = "regex")
```

If you only want to add ISO-3 codes:

```{r}
add_iso3_codes_column(df, "name")
```

You can also add a column with standardized names:

```{r}
add_short_names_column(df, "name")
```

Finally, you can add columns from IMF World Economic Outlook (WEO) data such as the GDP in national currency

```{r}
add_gdp_column(df, id_column = "id", date_column = "year", usd = FALSE)
```

Or the government expenditure (only available in national currency): 

```{r}
add_gov_exp_column(df, id_column = "id", date_column = "year")
```

And share of government expenditure to GDP: 

```{r}
add_gov_exp_share_column(df, id_column = "id", date_column = "year")
```

## Contributing

Contributions to `econtools` are welcome! If you’d like to contribute,
please follow these steps:

1.  **Create an issue**: Before making changes, create an issue
    describing the bug or feature you’re addressing.
2.  **Fork the repository**: After receiving supportive feedback from
    the package authors, fork the repository to your GitHub account.
3.  **Create a branch**: Create a branch for your changes with a
    descriptive name.
4.  **Make your changes**: Implement your bug fix or feature.
5.  **Test your changes**: Run tests to ensure your changes don’t break
    existing functionality.
6.  **Submit a pull request**: Push your changes to your fork and submit
    a pull request to the main repository.
